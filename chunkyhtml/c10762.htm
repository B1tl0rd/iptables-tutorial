<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Debugging your scripts</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="Iptables Tutorial 1.2.2"
HREF="book1.htm"><LINK
REL="PREVIOUS"
TITLE="What's next?"
HREF="x10754.htm"><LINK
REL="NEXT"
TITLE="Bash debugging tips"
HREF="x10776.htm"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="table.css"></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Iptables Tutorial 1.2.2</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x10754.htm"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x10776.htm"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="DEBUGGING"
></A
>Chapter 12. Debugging your scripts</H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
><A
HREF="c10762.htm#DEBUGGINGANECESSITY"
>Debugging, a necessity</A
></DT
><DT
><A
HREF="x10776.htm"
>Bash debugging tips</A
></DT
><DT
><A
HREF="x10835.htm"
>System tools used for debugging</A
></DT
><DT
><A
HREF="x10910.htm"
>Iptables debugging</A
></DT
><DT
><A
HREF="x10958.htm"
>Other debugging tools</A
></DT
><DT
><A
HREF="x11022.htm"
>What's next?</A
></DT
></DL
></DIV
><P
>One large and rather overlooked sides of writing your own rulesets is how
to debug the rulesets on your own, and how to find where you have done your 
mistakes in the rulesets. This chapter will show you a few basic steps you can
take to debug your scripts and find out what is wrong with them, as well as
some more elaborate things to look for and what can be done to avoid being
unable to connect to your firewall in case you accidentally run a bad ruleset
on it.
    </P
><P
>Most of what is taught here is based upon the assumption that the ruleset was
written in bash shell scripts, but they should be easy to apply in other
environments as well. Rulesets that have been saved with
iptables-save
are another piece of code alltogether unfortunately, and pretty much none of
these debugging methods will give you much luck. On the other hand,
iptables-save files are much simpler and since they can't
contain any scripting code that will create specific rules either, they are
much simpler to debug as well.
    </P
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="DEBUGGINGANECESSITY"
>Debugging, a necessity</A
></H1
><P
>Debugging is more or less a necessity when it comes to iptables and netfilter 
and most firewalls in general. The problem with 99% of all firewalls is that 
in the end there is a human being that decides upon the policies and how the 
rulesets are created, and I can promise you, it is easy to make a mistake while 
writing your rulesets. Sometimes, these errors are very hard to see with the 
naked eye, or to see the holes that they are creating through the firewall. 
Holes that you don't know of or didn't intend to happen in your scripts can
create havoc on your networks, and create an easy entry for your attackers.
Most of these holes can be found rather easily with a few good tools.
      </P
><P
>Other than this, you may write bugs into your scripts in other ways as 
well, which can create the problem of being unable to login to the firewall. 
This can also be solved by using a little bit of cleverness before running the 
scripts at all. Using the full power of both the scripting language as well as 
the system environment can prove incredibly powerful, which almost all 
experienced Unix administrators should already have noticed from before, and 
this is basically all we do when debugging our scripts as well.
      </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x10754.htm"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.htm"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x10776.htm"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>What's next?</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Bash debugging tips</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>
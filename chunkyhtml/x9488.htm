<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>DSCP target</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="Iptables Tutorial 1.2.2"
HREF="book1.htm"><LINK
REL="UP"
TITLE="Iptables targets and jumps"
HREF="c8815.htm"><LINK
REL="PREVIOUS"
TITLE="DROP target"
HREF="x9474.htm"><LINK
REL="NEXT"
TITLE="ECN target"
HREF="x9569.htm"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="table.css"></HEAD
><BODY
CLASS="SECTION"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Iptables Tutorial 1.2.2</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x9474.htm"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 11. Iptables targets and jumps</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x9569.htm"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="DSCPTARGET"
>DSCP target</A
></H1
><P
>This is a target that changes the
DSCP(Differentiated Services
Field) marks inside a packet. The DSCP target
is able to set any DSCP value inside a
TCP packet, which is a way of telling routers the
priority of the packet in question. For more information about
DSCP, look at the <A
HREF="a13413.htm#RFC2474"
><I
>RFC 2474 - Definition of the Differentiated Services Field 
(DS Field) in the IPv4 and IPv6 Headers</I
></A
> RFC document. 
    </P
><P
>Basically, DSCP is a way of differentiating different
services into separate categories, and based on this, give them different
priority through the routers. This way, you can give interactive
TCP sessions (such as
telnet, SSH,
POP3) a very high fast connection, that may not be
very suitable for large bulk transfers. If on the other hand the connection is
one of low importance (SMTP, or whatever you classify
as low priority), you could send it over a large bulky network with worse
latency than the other network, that is cheaper to utilize than the faster and
lower latency connections.
    </P
><DIV
CLASS="TABLE"
><A
NAME="TABLE.DSCPTARGET"
></A
><P
><B
>Table 11-6. DSCP target options</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="77"><COL
WIDTH="1*"><TBODY
><TR
><TD
>Option</TD
><TD
>--set-dscp</TD
></TR
><TR
><TD
>Example</TD
><TD
>iptables -t mangle -A FORWARD -p tcp --dport 80 -j 
DSCP --set-dscp 1
        </TD
></TR
><TR
><TD
>Explanation</TD
><TD
>This sets the DSCP value to the specified value. The
values can be set either via class, see below, or with the
--set-dscp, which takes either an integer value, or a hex
value.
        </TD
></TR
><TR
><TD
>Option</TD
><TD
>--set-dscp-class</TD
></TR
><TR
><TD
>Example</TD
><TD
>iptables -t mangle -A FORWARD -p tcp --dport 80 -j 
DSCP --set-dscp-class EF
        </TD
></TR
><TR
><TD
>Explanation</TD
><TD
>This sets the DSCP field according to a predefined
DiffServ class. Some of the possible values are
EF, BE and the
CSxx and AFxx values
available. You can find more information at <A
HREF="a13413.htm#CISCODSCP"
><I
>Implementing Quality of Service Policies with DSCP</I
></A
> site. Do note that the
--set-dscp-class and --set-dscp commands
are mutually exclusive, which means you can not use both of them in the same
command!
        </TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Works under Linux kernel 2.3, 2.4, 2.5 and 2.6.
      </P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x9474.htm"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.htm"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x9569.htm"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>DROP target</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c8815.htm"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>ECN target</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>